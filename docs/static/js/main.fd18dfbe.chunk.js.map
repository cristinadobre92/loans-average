{"version":3,"sources":["Loans.jsx","index.js"],"names":["buttons","id","name","activeButtons","Map","filterLoans","App","handleClick","state","loans","filter","f","interestRate","get","set","setState","wrapperRef","React","createRef","setWrapperRef","bind","handleClickOutside","axios","then","res","data","filterLoan","catch","error","console","log","message","document","addEventListener","this","removeEventListener","node","event","current","contains","target","renderAll","map","c","key","amount","className","ref","value","onClick","Math","round","length","reduce","a","b","Component","ReactDOM","render","StrictMode","getElementById"],"mappings":"kRAIMA,G,MAAU,CACd,CAAEC,GAAI,IAAKC,KAAM,OACjB,CAAED,GAAI,IAAKC,KAAM,OACjB,CAAED,GAAI,IAAKC,KAAM,OACjB,CAAED,GAAI,IAAKC,KAAM,OACjB,CAAED,GAAI,IAAKC,KAAM,OACjB,CAAED,GAAI,IAAKC,KAAM,OACjB,CAAED,GAAI,IAAKC,KAAM,OACjB,CAAED,GAAI,IAAKC,KAAM,OACjB,CAAED,GAAI,IAAKC,KAAM,OACjB,CAAED,GAAI,KAAMC,KAAM,OAClB,CAAED,GAAI,KAAMC,KAAM,SAGdC,EAAgB,IAAIC,IACtBC,EAAc,GAyGHC,E,kDAtGb,aAAe,IAAD,8BACZ,gBAgCFC,YAAc,SAACL,GACb,IAAIG,EAAc,GAGhBA,EADW,QAATH,EACY,EAAKM,MAAMC,MAEX,EAAKD,MAAMC,MAAMC,QAC7B,SAACC,GAAD,OAAOA,EAAEC,eAAiBV,GAAQC,EAAcU,IAAIF,EAAEC,kBAI1B,IAA5BT,EAAcU,IAAIX,GACpBC,EAAcW,IAAIZ,GAAM,GAExBC,EAAcW,IAAIZ,GAAM,GAG1B,EAAKa,SAAS,CAAEZ,kBAEhB,EAAKY,SAAS,CAAEV,iBAlDhB,EAAKG,MAAQ,CACXC,MAAO,GACPJ,YAAa,GACbF,cAAe,IAAIC,KAErB,EAAKY,WAAaC,IAAMC,YACxB,EAAKC,cAAgB,EAAKA,cAAcC,KAAnB,gBACrB,EAAKC,mBAAqB,EAAKA,mBAAmBD,KAAxB,gBATd,E,gEAYO,IAAD,OAClBE,IACGT,IADH,sBAEGU,MAAK,SAACC,GACL,IAAMf,EAAQe,EAAIC,KAClB,EAAKV,SAAS,CAAEN,QAAOiB,WAAY,EAAKlB,MAAMC,WAE/CkB,OAAM,SAACC,GACNC,QAAQC,IAAIF,EAAMG,YAEtBC,SAASC,iBAAiB,YAAaC,KAAKb,sB,6CAI5CW,SAASG,oBAAoB,YAAaD,KAAKb,sB,oCAGnCe,GACZF,KAAKlB,WAAaoB,I,yCAyBDC,GACbH,KAAKlB,aAAekB,KAAKlB,WAAWsB,QAAQC,SAASF,EAAMG,UAC7DnC,EAAc,GACd6B,KAAKnB,SAAS,CAAEV,mB,+BAIV,IAAD,OACDoC,EAAYP,KAAK1B,MAAMH,YAAYqC,KAAI,SAACC,GAAD,OAC3C,wBAAIC,IAAKD,EAAE1C,IAAK0C,EAAEE,WAGpB,OACE,yBAAKC,UAAU,aACb,wDACA,yBAAKC,IAAKb,KAAKlB,WAAY8B,UAAU,UAClC9C,EAAQ0C,KAAI,gBAAGxC,EAAH,EAAGA,KAAMD,EAAT,EAASA,GAAT,OACX,4BACE2C,IAAK3C,EACL+C,MAAO9C,EACP+C,QAAS,EAAK1C,YAAYa,KAAK,EAAMlB,EAAMD,GAC3C6C,UAAW3C,EAAcU,IAAIX,GAAQ,gBAAkB,UAEtDgD,KAAKC,MAAa,IAAPjD,GAAgB,SAIlC,sEACA,2BACwB,IAArBuC,EAAUW,OACP,wCACAX,GAEN,+EACA,uBAAGK,UAAU,WACwB,IAAlCZ,KAAK1B,MAAMH,YAAY+C,OACpB,wCACAF,KAAKC,MACHjB,KAAK1B,MAAMH,YAAYgD,QAAO,SAACC,EAAGC,GAAJ,OAAUD,EAAIC,EAAEV,SAAQ,GACpDX,KAAK1B,MAAMH,YAAY+C,c,GA/FvBnC,IAAMuC,WCjBxBC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEF3B,SAAS4B,eAAe,W","file":"static/js/main.fd18dfbe.chunk.js","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport './Loans.scss';\n\nconst buttons = [\n  { id: '1', name: 0.0299 },\n  { id: '2', name: 0.0399 },\n  { id: '3', name: 0.0499 },\n  { id: '4', name: 0.0599 },\n  { id: '5', name: 0.0699 },\n  { id: '6', name: 0.0849 },\n  { id: '7', name: 0.0949 },\n  { id: '8', name: 0.1099 },\n  { id: '9', name: 0.1349 },\n  { id: '10', name: 0.1549 },\n  { id: '11', name: 0.1999 },\n];\n\nconst activeButtons = new Map();\nlet filterLoans = [];\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      loans: [],\n      filterLoans: [],\n      activeButtons: new Map(),\n    };\n    this.wrapperRef = React.createRef();\n    this.setWrapperRef = this.setWrapperRef.bind(this);\n    this.handleClickOutside = this.handleClickOutside.bind(this);\n  }\n\n  componentDidMount() {\n    axios\n      .get(`/loans/marketplace`)\n      .then((res) => {\n        const loans = res.data;\n        this.setState({ loans, filterLoan: this.state.loans });\n      })\n      .catch((error) => {\n        console.log(error.message);\n      });\n    document.addEventListener('mousedown', this.handleClickOutside);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('mousedown', this.handleClickOutside);\n  }\n\n  setWrapperRef(node) {\n    this.wrapperRef = node;\n  }\n\n  handleClick = (name) => {\n    let filterLoans = [];\n\n    if (name === 'All') {\n      filterLoans = this.state.loans;\n    } else {\n      filterLoans = this.state.loans.filter(\n        (f) => f.interestRate === name || activeButtons.get(f.interestRate)\n      );\n    }\n\n    if (activeButtons.get(name) === true) {\n      activeButtons.set(name, false);\n    } else {\n      activeButtons.set(name, true);\n    }\n\n    this.setState({ activeButtons });\n\n    this.setState({ filterLoans });\n  };\n\n  handleClickOutside(event) {\n    if (this.wrapperRef && !this.wrapperRef.current.contains(event.target)) {\n      filterLoans = [];\n      this.setState({ filterLoans });\n    }\n  }\n\n  render() {\n    const renderAll = this.state.filterLoans.map((c) => (\n      <li key={c.id}>{c.amount}</li>\n    ));\n\n    return (\n      <div className=\"container\">\n        <h1>Select the interest rate</h1>\n        <div ref={this.wrapperRef} className=\"button\">\n          {buttons.map(({ name, id }) => (\n            <button\n              key={id}\n              value={name}\n              onClick={this.handleClick.bind(this, name, id)}\n              className={activeButtons.get(name) ? 'button-active' : 'button'}\n            >\n              {Math.round(name * 10000) / 100}\n            </button>\n          ))}\n        </div>\n        <h2>Loans made with the selected interest:</h2>\n        <p>\n          {renderAll.length === 0\n            ? 'No loans found for this interest rate'\n            : renderAll}\n        </p>\n        <h3>Average amount for the interest rate selected: </h3>\n        <p className=\"average\">\n          {this.state.filterLoans.length === 0\n            ? 'No loans found for this interest rate'\n            : Math.round(\n                this.state.filterLoans.reduce((a, b) => a + b.amount, 0) /\n                  this.state.filterLoans.length\n              )}\n        </p>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './Loans';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}